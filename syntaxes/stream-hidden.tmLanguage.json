{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "scopeName": "inject.stream-hider",
    "injectionSelector": "L:source, L:text",
    "patterns": [
        {
            "include": "#block-hide"
        },
        {
            "include": "#next-line-hide"
        },
        {
            "include": "#inline-hide"
        }
    ],
    "repository": {
        "block-hide": {
            "comment": "Hide everything from @stream-hide-start through @stream-hide-end (inclusive).",
            "name": "meta.stream-hidden.content.stream-hider",
            "begin": ".*@stream-hide-start.*",
            "end": ".*@stream-hide-end.*",
            "patterns": [
                {
                    "include": "$base"
                }
            ]
        },
        "next-line-hide": {
            "comment": "Hide the marker line and the very next line after @stream-hide-next.",
            "name": "meta.stream-hidden.content.stream-hider",
            "begin": ".*@stream-hide-next.*",
            "end": "^.*$",
            "patterns": [
                {
                    "include": "$base"
                }
            ]
        },
        "inline-hide": {
            "comment": "Hide the entire line containing @stream-hide-inline.",
            "name": "meta.stream-hidden.content.stream-hider",
            "match": "^.*@stream-hide-inline.*$"
        }
    }
}